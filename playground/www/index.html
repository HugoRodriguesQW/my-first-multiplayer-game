<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="utf-8">
	<title>Jogo Multiplayer</title>

	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<meta name='viewport' content='user-scalable=0' />

	<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@800&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href='./css/game.css' />

	<script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>

</head>

<body>

	<canvas id="game-area"></canvas>

  <div id="speed">
    <p>Velocidade:</p>
    <p class="color-red">X: <span id="velX"></span></p>
    <p class="color-green">Y: <span id="velY"></span></p>
    <div id="GravCampAlert">
      <p id="campAlt"></p>
    </div>
    <p class="little">< X <span id="posX"></span> ></p>
    <p class="little">< Y <span id="posY"></span> ></p>
  </div>

	<script type="module">
	  import createGame from './game.js'
    import createMap from './map.js'
    import makeGravity from './gravity.js'
    import renderScreen from './render.js'


    // HTML ELEMENTS
    const area = document.getElementById('game-area')
    area.width = innerWidth
    area.height = innerHeight

    console.log('Game Area ready')

    const onMap = createMap()

    console.log('Map: planets position:')
    onMap.spawPlanets(3,600)

    console.log('Map ready')

    const game = createGame(makeGravity, onMap, area)

    console.log('Game ready')

    const render = renderScreen(document, area, game, onMap)

    render.addUI('campAlt')
    render.addUI('velX')
    render.addUI('velY')
    render.addUI('posX')
    render.addUI('posY')

    function requestRender ()
    {
      console.log("Render ready. Ok! Let's play!")
      render.start(game.fps, game.toDisplay)

    } requestRender()



    //Diconnect ( Scoket IO )
    //socket.on('max-connections-error', (message) =>{
      //alert(message)
      //ocket.disconnect()
    //})

	</script>
</body>

</html>